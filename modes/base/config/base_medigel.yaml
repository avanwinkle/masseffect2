#config_version=5

event_player:
  # watch out! Recruitsave's early save can disable it before the medigel shot kicks in, causing a double save
  medigel_shot_hit:
    - do_medigel_save

shots:
  # This shot lights when medigel is available
  medigel_shot:
    hit_events:
      - s_outlane_left_active{not device.ball_saves.default.enabled and not device.ball_saves.recruitsave.enabled and not device.ball_saves.sbchase_save.enabled}
      - s_outlane_right_active{not device.ball_saves.default.enabled and not device.ball_saves.recruitsave.enabled and not device.ball_saves.sbchase_save.enabled}
    profile: medigel_profile
    enable_events: levelup, enable_medigel
    # Disable medigel during Normandy attack because it has many saves. Completing
    # the attack will levelup and restore medigel anyway.
    disable_events: ball_save_medigel_save_saving_ball, ball_will_end, mode_normandyattack_started
    tags: envshot_outlane

ball_saves:
  medigel_save:
    enable_events: do_medigel_save
    early_ball_save_events: ball_save_medigel_save_enabled
    auto_launch: true
    balls_to_save: 1
    only_last_ball: true  # don't waste medigel during multiballs

shot_profiles:
  medigel_profile:
    show: medigel_show
    show_when_disabled: false
    states:
      - name: lit

shows:
  medigel_show:
    - lights:
        l_left_outlane: on
        l_right_outlane: on

slide_player:
  ball_save_default_saving_ball:
    medigel_slide:
      action: play
      expire: 2s
      priority: 2000
  ball_save_recruitsave_saving_ball:
    medigel_slide:
      action: play
      expire: 2s
      priority: 2000
  ball_save_medigel_save_saving_ball:
    medigel_slide:
      action: play
      expire: 2s
      priority: 2000

slides:
  medigel_slide:
    - type: image
      image: medigel
      anchor_x: left
      anchor_y: bottom
      x: 0
      y: 0
      z: 2
    - type: text
      text: Medigel
      style: medium
      anchor_x: left
      anchor_y: bottom
      y: middle+2
      x: 38
      casing: upper
    - type: text
      text: Deployed
      style: medium
      anchor_x: left
      anchor_y: top
      y: middle-2
      x: 38
      casing: upper
    - type: rectangle
      width: 128
      height: 32
      color: black
      z: 0


sound_player:
  ball_save_medigel_save_saving_ball: medigel_sound
  ball_save_default_saving_ball: medigel_sound
  ball_save_recruitsave_saving_ball: medigel_sound

sound_pools:
  medigel_sound:
    sounds: deploying_medigel_1, deploying_medigel_2, on_your_feet_1, on_your_feet_2, first_aid_1, first_aid_2
    type: random_force_all
    track: voice
    volume: 0.8
    ducking:
      track: music
      attack: 0.5

sounds:
  deploying_medigel_1:
    file: en_us_player_f_ss_global_player_female_00314495_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0
  deploying_medigel_2:
    file: en_us_player_f_ss_global_player_female_00314496_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0
  on_your_feet_1:
    file: en_us_player_f_ss_global_player_female_00314499_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0
  on_your_feet_2:
    file: en_us_player_f_ss_global_player_female_00314500_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0
  first_aid_1:
    file: en_us_player_f_ss_global_player_female_00314501_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0
  first_aid_2:
    file: en_us_player_f_ss_global_player_female_00314502_f.ogg
    track: voice
    max_queue_time: 3s
    ducking:
      target: music
      attenuation: 0.8
      attack: 10ms
      release: 10ms
      release_point: 0

