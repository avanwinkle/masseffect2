#config_version=5

#####
# MASS EFFECT 2: FIELD MODE
#
# This is the "open playfield" mode that runs whenever there is no Mission mode
# or Wizard mode active. It contains many of the show materials (lights, sounds)
# for the Global modes that are disabled during missions.
#####

mode:
  start_events: start_mode_field
  stop_events: stop_mode_field
  priority: 310

event_player:
  mode_field_started.1:
    set_environment:
      env: field
  # If we are returning to field because we failed the suicide mission, say so
  mode_field_started.2{device.achievements.suicidemission.state=="stopped"}:
    - reset_from_suicide

config:
  - field_bumpers.yaml
  - field_recruit.yaml
  - field_shadowbroker.yaml
  - field_shipupgrades.yaml
  - field_shopping.yaml

sound_player:
  mode_field_started:
    music_normandy_walkin_intro:
      action: play
      loops: 0
      fade_out: 1s
      mode_end_action: stop
      events_when_stopped: play_galaxy_map
      priority: 1
  play_galaxy_map:
    music_galaxy_map:
      action: play
      loops: -1 # TODO: integrate with scanning loop
      fade_out: 1s
      mode_end_action: stop
      priority: 1

sounds:
  music_normandy_walkin_intro:
    file: mus_nor_normandy_walkin_intro.ogg
    track: music
  music_galaxy_map:
    file: mus_galaxy_map_loop.ogg
    track: music

slide_player:
  reset_from_suicide:
    reset_from_suicide_slide:
      action: play
      expire: 5s

slides:
  reset_from_suicide_slide:
    widgets:
      - type: text
        text: the Suicide Mission
        color: BBBBBB
        style: small
        anchor_y: top
        y: top-2
      - type: text
        text: FAILED
        style: text_default
        y: middle+2
      - type: text
        text: You must recruit
        style: small
        anchor_y: bottom
        y: 8
      - type: text
        text: your team again
        style: small
        anchor_y: bottom
        y: 1
