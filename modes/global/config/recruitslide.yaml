#config_version=5

#####
# Use a single slide/widget for all the missions, just update the text
#####
event_player:
  mode_recruitgarrus_started:
    set_recruitwidget:
      missionname: "Defend Archangel"
  mode_recruitgrunt_started:
    set_recruitwidget:
      missionname: "Defeat the Tank-Bred"
  mode_recruitjack_started:
    set_recruitwidget:
      missionname: "Escape from Purgatory"
  mode_recruitkasumi_started:
    set_recruitwidget:
      missionname: "Infiltrate the Vault"
  mode_recruitlegion_started:
    set_recruitwidget:
      missionname: "Stop the Heretics"
  mode_recruitmordin_started:
    set_recruitwidget:
      missionname: "Cure the Plague"
  mode_recruitsamara_started:
    set_recruitwidget:
      missionname: "Find Morinth"
  mode_recruittali_started:
    set_recruitwidget:
      missionname: "Destroy the Colossus"
  mode_recruitthane_started:
    set_recruitwidget:
      missionname: "Assault Dantius Towers"
  mode_recruitzaeed_started:
    set_recruitwidget:
      missionname: "Storm the Refinery"

slide_player:
  recruit_advance{status==1}:
    recruiting_advance_slide_2:
      expire: 1s
  recruit_advance{status==2}:
    recruiting_advance_slide_1:
      expire: 1s
  recruit_advance{status==3}:
    recruiting_advance_slide_lit:
      expire: 2s
  missionselect_recruitmission_selected:
    recruitslide:
      action: play
      priority: 100
  recruit_mission_ended:
    recruitslide:
      action: remove

slides:
  recruitslide: []
  recruiting_advance_slide_2:
    widgets:
      - type: text
        text: Recruit (squadmate)
        font_name: Quadrit-10
        font_size: 10
        anchor_y: bottom
        y: bottom+45%
        casing: title
      - type: text
        text: 2 shots to light
        anchor_y: bottom
        style: dmd_small
        y: 3
  recruiting_advance_slide_1:
    widgets:
      - type: text
        text: Recruit (squadmate)
        font_name: Quadrit-10
        font_size: 10
        anchor_y: bottom
        y: bottom+45%
        casing: title
      - type: text
        text: 1 shot to light
        style: dmd_small
        anchor_y: bottom
        y: 3
  recruiting_advance_slide_lit:
    widgets:
      - type: text
        text: (squadmate) Ready!
        font_name: Quadrit-10
        font_size: 10
        anchor_y: bottom
        y: bottom+45%
        casing: title
      - type: text
        text: Left Ramp to Start Mission
        style: dmd_small
        anchor_y: bottom
        y: 3

widget_player:
  set_recruitwidget:
    recruitwidget_mission:
      action: add
      slide: recruitslide
    recruitwidget_score:
      action: add
      slide: recruitslide
  update_recruitmission:
    recruitwidget_mission:
      action: update
      slide: recruitslide
  # Adding players triggers their variables to be set, which can show an extra "0"
  # on the base slide. Check player number to prevent this.
  # TODO: Move all recruitslide logic out of global and into recruit missions?
  player_temp_hurryup_value{player_num==current_player.number}:
    recruitwidget_score:
      action: update
      slide: recruitslide
  timer_recruittimer_started:
    time_remaining_widget:
      action: add
      slide: recruitslide
  timer_recruittimer_tick:
    time_remaining_widget:
      action: update
      slide: recruitslide
  recruit_mission_ended:
    recruitwidget_mission:
      action: remove
    recruitwidget_score:
      action: remove

widgets:
  recruitwidget_mission:
    - type: text
      text: (missionname)
      font_name: pixelmix-8
      font_size: 8
      anchor_x: left
      anchor_y: top
      x: 2
      y: top-4
  recruitwidget_score:
    - type: text
      text: (player|temp_hurryup_value)
      number_grouping: true
      font_size: 10
      font_name: Quadrit-10
      anchor_x: left
      anchor_y: bottom
      x: 2
      y: 0
  time_remaining_widget:
    - type: text
      text: "(ticks_remaining)"
      font_name: pixelmix-8
      font_size: 8
      anchor_x: right
      anchor_y: bottom
      x: right-4
      y: 4
