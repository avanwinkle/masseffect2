#config_version=5

event_player:
  slide_recruitslide_active:
    # Prepopulate the slide when it comes in
    timer_recruittimer_tick:
      ticks_remaining: { value: device.timers.recruittimer.ticks }

#####
# Use a single slide/widget for all the missions, just update the text
#####
variable_player:
  start_mode_recruitgarrus:
    missionname:
      string: "Defend Archangel"
      action: set
    mission_instructions{not device.counters.doors_closed_counter.completed}:
      string: "Close the shutters"
      action: set
    mission_instructions{device.counters.doors_closed_counter.completed}:
      string: "Get upstairs!"
      action: set
  logicblock_doors_closed_counter_complete:
    mission_instructions:
      string: "Get upstairs!"
      action: set
  start_mode_recruitgrunt:
    missionname:
      string: "Defeat the Tank-Bred"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitjack:
    missionname:
      string: "Escape from Purgatory"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitkasumi:
    missionname:
      string: "Infiltrate the Vault"
      action: set
    mission_instructions:
      string: "Avoid the Alarms"
      action: set
  start_mode_recruitlegion:
    missionname:
      string: "Stop the Heretics"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitmordin:
    missionname:
      string: "Cure the Plague"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitsamara:
    missionname:
      string: "Follow Morinth's Trail"
      action: set
    mission_instructions:
      string: "Hit targets to light shots"
      action: set
  start_mode_recruittali:
    missionname:
      string: "Destroy the Colossus"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitthane:
    missionname:
      string: "Assault Dantius Towers"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitzaeed.1{current_player.zaeed_path_renegade==-1}:
    missionname:
      string: "Storm the Refinery"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitzaeed.2{current_player.zaeed_path_renegade==0}:
    missionname:
      string: "Save the Workers"
      action: set
    mission_instructions:
      string: " "
      action: set
  start_mode_recruitzaeed.3{current_player.zaeed_path_renegade==1}:
    missionname:
      string: "Stop Vido's Escape"
      action: set
    mission_instructions:
      string: " "
      action: set


slide_player:
  mode_type_mission_started:
    recruit_mission_slide:
      target: lcd_left
      action: play
      priority: 100
  mode_type_mission_stopped:
    recruit_mission_slide:
      action: remove
      target: lcd_left

slides:
  recruit_mission_slide:
    widgets:
      - type: text
        text: (score)
        style: body_md, row_top, col_left_anchor, num
        opacity: 0.5
      - type: text
        text: (missionname)
        style: header_sm, row_main, col_left_anchor
      - type: text
        text: (mission_instructions)
        style: body_sm, row_sub, col_left_anchor, lcd_only
        animations:
          show_slide: pulse_text_slow
      - type: text
        text: (global_recruittimer_tick)
        style: timer_primary, row_gutter, col_right_indent
      - widget: console_background

widgets:
  # Widgets that appear when advance shots are hit
  recruit_advance_widget_1:
    - type: text
      text: Recruit (squadmate)
      style: header_lg, row_main, col_left_anchor
      casing: title
      z: 110
    - type: text
      text: 2 shots to unlock
      anchor_y: bottom
      style: body_md, row_sub, col_left_anchor
      z: 110
    - widget: popup_image_(squadmate)
    - widget: console_background
  recruit_advance_widget_2:
    - type: text
      text: Recruit (squadmate)
      style: header_lg, row_main, col_left_anchor
      casing: title
    - type: text
      text: 1 shot to unlock
      style: body_md, row_sub, col_left_anchor
    - widget: popup_image_(squadmate)
    - widget: console_background
  recruit_advance_widget_3:
    - type: text
      text: (squadmate) Ready!
      style: header_lg, row_main, col_left_anchor, num
      casing: title
    - type: text
      text: Mission Available
      style: body_md, row_super, col_left_anchor
    - type: text
      text: Left Ramp to Start
      style: body_md, row_sub, col_left_anchor
    - widget: popup_image_(squadmate)
    - widget: console_background

  popup_image_garrus:
    - type: image
      image: popup_image_garrus
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_grunt:
    - type: image
      image: popup_image_grunt
      style: profile
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_jack:
    - type: image
      image: popup_image_jack
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_kasumi:
    - type: image
      image: popup_image_kasumi
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_legion:
    - type: image
      image: popup_image_legion
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_mordin:
    - type: image
      image: popup_image_mordin
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_samara:
    - type: image
      image: popup_image_samara
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_tali:
    - type: image
      image: popup_image_tali
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_thane:
    - type: image
      image: popup_image_thane
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation
  popup_image_zaeed:
    - type: image
      image: popup_image_zaeed
      style: image_popup
      animations:
        add_to_slide: popup_enter_animation
        remove_popup: popup_exit_animation


# Widgets that overlay DURING a mission
  shots_remaining_widget:
    - type: text
      text: "Shots: (value)"
      style: header_xs, row_gutter, col_left_center
  # secondary_timer_widget:
  #   - type: text
  #     text: (ticks_remaining)
  #     style: body_lg, row_bottom, col_right_anchor

