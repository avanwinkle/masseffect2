#config_version=5

#####
# RECRUIT TIMER CONFIG
#
# It's a lot less work to have just one timer for recruitment missions and let
# each mission configure as it needs to. This way all of the events and widgets
# can be programmed once and shared across all missions, hurray!
#####

event_player:
  missionselect_recruitmission_selected:
    - recruittimer_start|3s     # It's nice to give a little delay
  timer_recruittimer_complete:
    - stop_recruitmission
    - recruit_mission_ended
  recruit_success:
    - stop_recruitmission
    - recruit_mission_ended

timers:
  recruittimer:
    start_value: 60
    max_value: 60
    end_value: 0
    tick_interval: 1s
    direction: down
    control_events:
      # Some missions use different timing, so a few handlers to adjust the clock
      - event: recruittimer_add_ten
        action: add
        value: 10
      - event: recruittimer_add_twelve
        action: add
        value: 12
      - event: recruittimer_set_twelve
        action: jump
        value: 12
      - event: recruittimer_set_twenty
        action: jump
        value: 20
      # During a ball save or lock, pause the timer to allow for the new ball to eject
      - event: ball_save_recruitsave_saving_ball{device.timers.recruittimer.running}
        action: pause
        value: 2
      - event: multiball_lock_fmball_lock_locked_ball{device.timers.recruittimer.running}
        action: pause
        value: 2
      # The timer starts fresh on every mission and stops on every end
      - event: recruittimer_start
        action: restart
      - event: mode_type_mission_stopped
        action: stop
