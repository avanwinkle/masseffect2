#config_version=5

#####
# LOCKHANDLER MODE
#
# This is a game logic mode to handle the complex logic of balls entering the
# ball device (bd_lock) via the left ramp. 
#
# Most of the logic is handled in a custom Python class (lockhandler.py). This
# yaml file instantiates that class, sets up an event listener to trigger the
# class handler.

# Also this yaml file has got some multiball_lock logic because the class
# interacts with multiball devices directly and it kinda makes it easier to have
# all that contained here. Once the logic/behavior is stable, it may make more
# sense to move the multiball locks to their respective modes.
#####

mode:
  start_events: start_mode_lockhandler
  stop_events: stop_mode_lockhandler
  code: lockhandler.LockHandler
  priority: 1000

event_player:
  s_left_ramp_exit_active: lockhandler_check_bypass
  overlord_light_shot_hit: enable_overlord_lock
  multiball_lock_physicallock_locked_ball: lockhandler_ball_enter
  multiball_lock_overlordlock_full: start_mode_overlordmultiball

multiball_locks:
  overlordlock:
    balls_to_lock: 3
    lock_devices: bd_lock
    autoreplace_locked_balls: False
    reset_count_for_current_player_events: multiball_overlord_multiball_ended
    enable_events: enable_overlord_lock
    disable_events: multiball_lock_overlordlock_locked_ball
    debug: true
