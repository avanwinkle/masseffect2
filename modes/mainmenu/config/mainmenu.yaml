#config_version=5
mode:
  start_events: start_mode_mainmenu, ball_ended
  stop_events: stop_mode_mainmenu, ball_started
  priority: 100
  game_mode: false
  code: mainmenu.MainMenu

mode_settings:
  select_item_events: select_item
  next_item_events: next_item
  previous_item_events: prev_item
  selectable_items: casual
  casual_only: false

event_player:
  career_loaded: stop_mode_mainmenu
  s_flipper_right_inactive{machine.flipper_cancelling==0 and not mode.createprofile.active}: next_item
  s_flipper_left_inactive{machine.flipper_cancelling==0 and not mode.createprofile.active}: prev_item
  s_action_button_active{not mode.createprofile.active}: select_item
  flipper_cancel{not mode.createprofile.active}: select_item

variable_player:
  mode_mainmenu_started:
    flipper_cancelling:
      int: 0
      action: set_machine
  flipper_cancel:
    flipper_cancelling:
      int: 1
      action: set_machine
  both_flippers_inactive:
    flipper_cancelling:
      int: 0
      action: set_machine

queue_relay_player:
  # For the first ball, allow the player to pick a profile
  player_turn_starting{current_player.ball==0}:
    post: show_mainmenu
    wait_for: mainmenu_item_selected

slide_player:
  # Highlighting options in the main menu
  mainmenu_new_game_highlighted: new_game_slide
  mainmenu_resume_game_highlighted: resume_game_slide
  mainmenu_change_career_highlighted: 
    change_career_slide{career_name!=" "}: {}
    select_career_slide{career_name==" "}: {}
  mainmenu_casual_highlighted: casual_slide
  mainmenu_create_career_highlighted: career_new_slide
  # Selecting and moving between menus
  highlight_career: career_select_slide

slides:
  change_career_slide:
    widgets:
      - type: text
        text: Switch Profile
        style: header_md, row_main, col_left_anchor
      - type: text
        text: (career_name)
        style: body_sm, row_top, col_left_anchor
      - widget: background_console
  select_career_slide:
    widgets:
      - type: text
        text: Select a Profile
        style: header_md, row_main, col_left_anchor
      - widget: background_console
  resume_game_slide:
    widgets:
      - type: text
        text: Continue Game
        style: header_md, row_main, col_left_anchor
      - type: text
        text: (career_name)
        style: body_sm, row_top, col_left_anchor
      - widget: background_console
  new_game_slide:
    widgets:
      - type: text
        text: New Game
        style: header_md, row_main, col_left_anchor
      - type: text
        text: (career_name)
        style: body_sm, row_top, col_left_anchor
      - widget: background_console
  career_select_slide:
    widgets:
      - type: text
        text: "Load Profile:"
        style: body_sm, row_top, col_left_anchor
      - type: text
        text: (career_name)
        style: body_lg, row_main, col_left_anchor
      - type: text
        text: Level (level)
        style: body_sm, row_sub_under, col_left_anchor
      - type: text
        text: "Started: (career_started)\nLast played: (last_played)"
        halign: right
        style: body_sm, row_sub_under, col_right_anchor
      - widget: background_console
  career_new_slide:
    widgets:
      - type: text
        text: Create New Profile
        style: header_md, row_main, col_left_anchor
      - widget: background_console
  casual_slide:
    widgets:
      - type: text
        text: Casual Play
        style: header_md, row_main, col_left_anchor
      - widget: background_console

show_player:
  show_mainmenu: mainmenu_show
  mainmenu_item_selected:
    mainmenu_show:
      action: stop

shows:
  mainmenu_show:
    - duration: 1s
      lights:
        l_action_button_rgb:
          color: red
          fade: 100ms
    - duration: 1s
      lights:
        l_action_button_rgb:
          color: blue
          fade: 100ms

sound_player:
  show_mainmenu: mus_gui_char_create
  mainmenu_change_career_selected: galaxy_zoom_in
  mainmenu_career_selected: galaxy_zoom_out
  mainmenu_item_selected:
    gui_splashstart:
      action: play
      events_when_stopped: stop_mode_mainmenu

sounds:
  mus_gui_char_create:
    file: mus_reconstruction_a.ogg
    track: music
    volume: 0.5
    start_at: 3s
    fade_in: 500ms
    fade_out: 1s
    mode_end_action: stop
  galaxy_zoom_in:
    file: SFXGame.586.ogg
    track: sfx
  galaxy_zoom_out:
    file: SFXGame.587.ogg
    track: sfx

