#config_version=5

#####
# LAIR OF THE SHADOW BROKER: VASIR CHASE
#
# This mode is triggered by dropping the dropbank and involves a series of shots
# that must be hit within a time limit (LO > LR > RO > KB). Completing the series
# begins the Vasir Combat mode.
#
# TODO: Scoring
#
# Progress is not saved for this mode, not even completing it. Failing this mode
# or Vasir Combat requires the player to restart from the beginning of the chase.
#####

mode:
  start_events: start_mode_shadowbroker_chase
  stop_events: stop_mode_shadowbroker_chase
  priority: 800

event_player:
  sbchase_kickback_chaseprofile_lit_hit: shadowbroker_chase_complete
  shadowbroker_chase_complete: stop_mode_shadowbroker_chase
  sbchase_timer_complete: stop_mode_shadowbroker_chase, exit_shadowbroker_modes

shot_groups:
  sbchase_shots:
    shots: sbchase_left_ramp, sbchase_left_orbit, sbchase_right_ramp, sbchase_right_orbit, sbchase_kickback

shot_profiles:
  chaseprofile:
    advance_on_hit: false
    states:
      - name: off
        show: off
      - name: lit
        show: flash

shots:
  sbchase_left_ramp:
    advance_events: sbchase_left_orbit_chaseprofile_lit_hit
    hit_events: sh_left_ramp_hit
    reset_events: sbchase_left_ramp_chaseprofile_lit_hit
    profile: chaseprofile
    show_tokens:
      led: l_left_ramp_shield_rgb
  sbchase_left_orbit:
    advance_events: mode_shadowbroker_chase_started
    reset_events: sbchase_left_orbit_chaseprofile_lit_hit
    hit_events: sh_left_orbit_hit
    profile: chaseprofile
    show_tokens:
      led: l_left_orbit_shield_rgb
  sbchase_right_ramp:
    hit_events: sh_right_ramp_hit
    profile: chaseprofile
    show_tokens:
      led: l_right_ramp_shield_rgb
  sbchase_right_orbit:
    advance_events: sbchase_left_ramp_chaseprofile_lit_hit
    hit_events: sh_right_orbit_hit
    reset_events: sbchase_right_orbit_chaseprofile_lit_hit
    profile: chaseprofile
    show_tokens:
      led: l_right_orbit_shield_rgb
  sbchase_kickback:
    advance_events: sbchase_right_orbit_chaseprofile_lit_hit
    hit_events: sh_kickback_hit
    profile: chaseprofile
    show_tokens:
      led: l_kickback_shield_rgb

timers:
  sbchase_timer:
    start_value: 60
    end_value: 0
    tick_interval: 1s
    direction: down
    control_events:
      - event: shadowbroker_chase_complete
        action: stop
      - event: sbchase_shots_hit
        action: add
        value: 12
