#config_version=5
mode:
  start_events: start_mode_shadowbroker_vasir
  stop_events: stop_mode_shadowbroker_vasir
  priority: 800

event_player:
  vasir_timeout_complete: stop_mode_shadowbroker_vasir
  vasir_shot_sbvasir_shot_profile_health_hit: shadowbroker_vasir_complete
  shadowbroker_vasir_complete: stop_mode_shadowbroker_vasir

shot_groups:
  vasir_shot:
    rotate_events: vasir_timer_complete
    shots: 
      - sbvasir_hitbank
      - sbvasir_left_orbit
      - sbvasir_right_ramp
      - sbvasir_dropbank
      - sbvasir_left_ramp
      - sbvasir_right_orbit

shot_profiles:
  sbvasir_shot_profile:
    loop: true
    steps:
      - name: off
        show: off
        manual_advance: true
      - name: barrier
        show: flash_color_show
        show_tokens:
          color: purple
      - name: armor
        show: flash_color_show
        show_tokens:
          color: yellow
      - name: health
        show: flash_color_show
        show_tokens:
          color: red

shots:
  sbvasir_left_ramp:
    hit_events: sh_left_ramp_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_left_ramp_shield_rgb
  sbvasir_left_orbit:
    hit_events: sh_left_orbit_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_left_orbit_shield_rgb
  sbvasir_right_ramp:
    hit_events: sh_right_ramp_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_right_ramp_shield_rgb
  sbvasir_right_orbit:
    hit_events: sh_right_orbit_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_right_orbit_shield_rgb
  sbvasir_kickback:
    hit_events: sh_kickback_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_kickback_shield_rgb
  sbvasir_dropbank:
    hit_events: sh_dropbank_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_dropbank_shield_rgb
  sbvasir_hitbank:
    advance_events: mode_shadowbroker_vasir_started # Start with hitbank enabled
    hit_events: sh_hitbank_hit
    profile: sbvasir_shot_profile
    show_tokens:
      leds: l_hitbank_shield_rgb

timers:
  vasir_timer:  # Timer for the shot rotation
    start_value: 12
    end_value: 0
    tick_interval: 1s
    direction: down
    restart_on_complete: true
    start_running: true
    control_events:
      - event: mode_shadowbroker_vasir_will_stop
        action: stop
  vasir_timeout: # Timer for the mode to fail
    start_value: 120
    end_value: 0
    tick_interval: 1s
    direction: down
    start_running: true
    control_events:
      - event: shadowbroker_vasir_complete
        action: stop

