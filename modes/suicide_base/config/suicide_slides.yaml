#config_version=5

slide_player:
    mode_suicide_base_started:
      singleplayer_slide:
        action: remove
      multiplayer_slide:
        action: remove
      suicide_slide:
        action: play
    slide_singleplayer_slide_created:
      singleplayer_slide:
        action: remove
    slide_multiplayer_slide_created:
      multiplayer_slide:
        action: remove
    player_reaper_hp{value>0 and change<0}:
      reaper_hitdamage_slide:
        expire: 4s
    restore_singleplayer_slide: singleplayer_slide
    restore_multiplayer_slide: multiplayer_slide

widget_player:
  # START/STOP Modes (Titles and add/remove)
    mode_type_suicide_stopped:
      suicide_shots:
        action: remove
      suicide_time:
        action: remove
    mode_suicide_omegarelay_started:
      omegarelay_title:
        slide: suicide_slide
    mode_suicide_omegarelay_will_stop:
      omegarelay_title:
        action: remove
    suicide_huddle_specialist_selected{mission=="infiltration"}:
      infiltration_title:
        slide: suicide_slide
    mode_suicide_infiltration_will_stop:
      infiltration_title:
        action: remove
    suicide_huddle_specialist_selected{mission=="longwalk"}:
      longwalk_title:
        slide: suicide_slide
    mode_suicide_longwalk_will_stop:
      longwalk_title:
        action: remove
    mode_suicide_tubes_started:
      suicide_time:
        action: remove
      suicide_shots:
        action: remove
      suicide_tubes:
        slide: suicide_slide
      tubes_title:
        slide: suicide_slide
    mode_suicide_tubes_will_stop:
      tubes_title:
        action: remove
      suicide_tubes:
        action: remove
      suicide_detonate:
        action: remove
    mode_suicide_platforms_started:
      platforms_title:
        slide: suicide_slide
    # Until we have mode endrun, use the event to fake it
    #mode_suicide_endrun_started:
    start_mode_suicide_endrun:
      humanreaper_title:
        action: remove
      platforms_title:
        action: remove
      endrun_title:
        slide: suicide_slide
  # TIMERS AND SHOTS Updating Widgets
    timer_omegarelay_tick:
      suicide_time:
        action: update
    timer_omegarelay_stopped:
      suicide_time:
        action: remove
    timer_infiltration_tick:
      suicide_time:
        action: update
    timer_longwalk_tick:
      suicide_time:
        action: update
    logicblock_swarmpaths_hit:
      suicide_shots:
        action: update
    logicblock_valves_hit:
      suicide_shots:
        action: update
    logicblock_tubes_counter_updated{value>0}:
      suicide_tubes:
        action: update
        slide: suicide_slide
    logicblock_tubes_counter_complete:
      suicide_tubes:
        action: remove
      suicide_detonate:
        slide: suicide_slide
  # SET INITIAL
    set_initial_suicide_shots:
      suicide_shots:
        action: update
        slide: suicide_slide
    set_initial_suicide_ticks:
      suicide_time:
        action: update
        slide: suicide_slide

slides:
  # No longer used?
  huddle_slide:
    widgets:
      - type: rectangle
        color: black
        width: 128
        height: 32
        z: 1
  # Basic slide for all uses
  suicide_slide:
    widgets:
      - type: text
        text: the Suicide Mission
        color: BBBBBB
        style: small
        anchor_y: top
        y: top-2
  # Identical to suicide_slide but separate because of all the widgets
  reaper_slide:
    widgets:
      - type: text
        text: the Suicide Mission
        color: BBBBBB
        style: small
        anchor_y: top
        y: top-2
        z: 2
      - type: text
        text: Destroy the Reaper
        style: text_default
        z: 2
      - type: text
        text: (player|temp_build_value) x (player|temp_multiplier)
        number_grouping: true
        style: small
        anchor_x: left
        anchor_y: bottom
        x: 2
        y: 2
        z: 2
      - type: text
        text: (player|reaper_hp) HP
        style: small
        number_grouping: true
        anchor_x: right
        anchor_y: bottom
        x: right-2
        y: 2
        z: 2
      - type: rectangle
        color: black
        width: 128
        height: 32
        z: 1
  # Fancy flashing to show the reaper is firing
  reaper_firing_slide:
    widgets:
      - type: rectangle
        width: 128
        height: 32
        anchor_x: left
        anchor_y: bottom
        x: 0
        y: 0
        z: 0
        color: 000000
      - type: rectangle
        width: 128
        height: 32
        anchor_x: left
        anchor_y: bottom
        x: 0
        y: 0
        z: 1
        color: FFFFFF
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: .15s
            - property: opacity
              value: 0
              duration: .15s
              repeat: true
  # For debugging mostly, lots of numbers about the hit
  reaper_hitdamage_slide:
    widgets:
      - type: text
        text: KAPOW!
        style: text_default
        anchor_y: bottom
        y: middle+2
      - type: text
        text: (change) damage dealt!
        style: small
        anchor_y: top
        y: middle-2
      - type: text
        text: (value) remaining
        style: small
        anchor_y: bottom
        y: 2
  # Shown when a squadmate is killed, during restart mode
  squadmate_killed_slide:
    widgets:
      - type: text
        text: Shoot ramp to try again
        style: small
        anchor_y: top
        y: middle-4
      - type: text
        text: (player|killed_squadmate) is dead
        style: small
        anchor_y: bottom
        y: middle+4

widgets:
  # Titles for the different modes
    huddle_title:
      - type: text
        text: Specialist Required
        style: medium
    omegarelay_title:
      - type: text
        text: Omega 4 Relay
        style: text_default
    infiltration_title:
      - type: text
        text: Infiltration
        style: text_default
    longwalk_title:
      - type: text
        text: the Long Walk
        style: text_default
    tubes_title:
      - type: text
        text: Destroy the Tubes
        style: text_default
    platforms_title:
      - type: text
        text: Final Battle
        style: text_default
    humanreaper_title:
      - type: text
        text: the Human Reaper
        style: text_default
    endrun_title:
      - type: text
        text: the End Run
        style: text_default
      - type: text
        text: "Doesn't exist. You win!"
        style: small
        anchor_y: bottom
        y: 2
  # Widgets for timers and shot counters
    suicide_time:
      - type: text
        text: (ticks)
        style: small_bot_left
    suicide_shots:
      - type: text
        text: "Shots: (count)"
        style: small_bot_right
    suicide_tubes:
      - type: text
        text: "Tubes: (value)"
        style: small_bot_right
    suicide_hurryup:
      - type: text
        text: (value)
        number_grouping: true
        style: small_bot_left
    suicide_damage:
      - type: text
        text: "(value)"
        style: small_bot_right
        number_grouping: true
    suicide_detonate:
      - type: text
        text: Shoot Ramp
        style: small
        anchor_y: bottom
        y: 1
        z: 4
        animations:
          add_to_slide:
            - property: opacity
              value: 0.2
              duration: .75s
            - property: opacity
              value: 1
              duration: .75s
              repeat: true
    reaper_charging_widget:
      - type: text
        text: Firing in (ticks)s
        style: small
        anchor_y: bottom
        y: 1
        z: 4
        animations:
          add_to_slide:
            - property: opacity
              value: 0
              duration: .25s
            - property: opacity
              value: 1
              duration: .25s
              repeat: true
      - type: rectangle
        color: 000000
        width: 128
        height: 7
        anchor_y: bottom
        y: 0
        z: 3
  # Individual squadmate names for specialist selection
    specialist_garrus_widget:
      - type: text
        text: Garrus
        style: spec_dead
        y: 24
        x: 2
        z: 2
    specialist_jack_widget:
      - type: text
        text: Jack
        style: spec_dead
        y: 24
        x: 2
        z: 2
    specialist_jacob_widget:
      - type: text
        text: Jacob
        style: spec_dead
        y: 13
        x: 2
        z: 2
    specialist_kasumi_widget:
      - type: text
        text: Kasumi
        style: spec_dead
        y: 2
        x: 2
        z: 2
    specialist_legion_widget:
      - type: text
        text: Legion
        style: spec_dead
        y: 24
        x: 44
        z: 2
    specialist_miranda_widget:
      - type: text
        text: Miranda
        style: spec_dead
        y: 24
        x: 44
        z: 2
    specialist_mordin_widget:
      - type: text
        text: Mordin
        style: spec_dead
        y: 13
        x: 44
        z: 2
    specialist_samara_widget:
      - type: text
        text: Samara
        style: spec_dead
        y: 13
        x: 44
        z: 2
    specialist_tali_widget:
      - type: text
        text: Tali
        style: spec_dead
        y: 2
        x: 44
        z: 2
    specialist_thane_widget:
      - type: text
        text: Thane
        style: spec_dead
        y: 24
        x: 86
        z: 2

